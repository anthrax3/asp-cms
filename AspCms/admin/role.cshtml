@{
    
    Page.Title = "Role management";
    Layout = "~/admin/_AdminLayout.cshtml";

    var mode = Tag.Mode;
  
}

@if (!Post.Mode.IsEmpty())
{

    //var tag = Tag.Current;

    <div>
    <form name="role" method="post" action="~/admin/role.ashx">
        <input type="hidden" name="mode" value="@mode" />
        <input type="hidden" name="roleId" value="@tag.Id" />
        
        <p>Name: <input type="text" name="roleName" value="@tag.Name" /></p>
        
         <p><input type="submit" name="roleSubmit" value="Submit" /></p>
    </form>
</div>
    
}
else 
{
    var grid = new WebGrid(
        source: PostRepository.GetAll(orderBy: "DateCreated DESC"),
        rowsPerPage: 30
        );
    
    @grid.GetHtml(
    columns: grid.Columns(
        grid.Column(format: @<a href="~/admin/post/edit/@item.Slug">Edit</a>),
        grid.Column(format: @<a href="~/admin/post/delete/@item.Slug">Delete</a>),  
        grid.Column("Title"),
        grid.Column("DateCreated", header: "Date Created"),
        grid.Column("DatePublished", header: "Published"),
        grid.Column("AuthorId", header: "Author")
    )
   );

}

